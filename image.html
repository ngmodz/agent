<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <title>Image</title>
    
    <!-- Cache control meta tags -->
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    
    <!-- Preload critical resources -->
    <link rel="preload" href="style.css?v=1.0.1" as="style">
    <link rel="preload" href="page-transitions.js?v=1.0.1" as="script">
    <link rel="preload" href="index.html" as="document">
    
    <link rel="stylesheet" href="style.css?v=1.0.1">
    <!-- Web standard icon -->
    <link rel="icon" href="icons/viralgurux-192x192.png">
    <!-- PWA Meta Tags -->
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#007bff">
    <!-- iOS specific icons - naming convention is critical -->
    <link rel="apple-touch-icon" href="apple-touch-icon.png">
    <!-- iOS Meta Tags -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Viralgurux">
    <!-- iOS specific meta -->
    <meta name="apple-mobile-web-app-status-bar" content="#007bff">
    <!-- iOS splash screen image -->
    <link rel="apple-touch-startup-image" href="icons/viralgurux-512x512.png">
    <!-- Responsive header styles -->
    <style>
        @media (max-width: 768px) {
            .header-title {
                font-size: 2.2em !important;
            }
        }
        @media (max-width: 480px) {
            .header-title {
                font-size: 1.8em !important;
            }
        }

        /* Content container */
        .content-container {
            padding-top: 0;
        }

        /* Remove space after header */
        header {
            margin-bottom: -10px;
        }

        /* Image Generator Form Styles */
        .form-container {
            margin: 0;
        }

        .form-group {
            margin-bottom: 10px;
        }

        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: 600;
        }

        .form-control {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 16px;
        }

        .form-control:focus {
            border-color: #007bff;
            outline: none;
            box-shadow: 0 0 0 0.2rem rgba(0,123,255,.25);
        }

        .btn {
            display: inline-block;
            font-weight: 400;
            text-align: center;
            white-space: nowrap;
            vertical-align: middle;
            user-select: none;
            border: 1px solid transparent;
            padding: 0.375rem 0.75rem;
            font-size: 1rem;
            line-height: 1.5;
            border-radius: 0.25rem;
            transition: color 0.15s ease-in-out, background-color 0.15s ease-in-out, border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out;
            cursor: pointer;
        }

        .btn-primary {
            color: #fff;
            background-color: #007bff;
            border-color: #007bff;
        }

        .btn-primary:hover {
            background-color: #0069d9;
            border-color: #0062cc;
        }

        .btn-secondary {
            color: #fff;
            background-color: #6c757d;
            border-color: #6c757d;
        }

        .btn-secondary:hover {
            background-color: #5a6268;
            border-color: #545b62;
        }

        .btn-block {
            display: block;
            width: 100%;
        }

        /* Format Selection Styles */
        .format-selection {
            display: none;
            margin-top: 20px;
        }

        .format-options {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            margin-top: 15px;
        }

        .format-option {
            flex: 1;
            min-width: 100px;
            text-align: center;
            padding: 15px;
            border: 2px solid #ddd;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        /* Make format options display better on small screens */
        @media (max-width: 480px) {
            .format-options {
                flex-direction: column;
                align-items: center;
            }
            
            .format-option {
                width: 100%;
                max-width: 280px;
            }
        }

        .format-option:hover {
            border-color: #007bff;
            background-color: #f8f9fa;
        }

        .format-option.selected {
            border-color: #007bff;
            background-color: #e6f2ff;
        }

        .format-option img {
            max-width: 100%;
            height: auto;
            margin-bottom: 10px;
        }

        /* Image Preview Styles */
        .image-preview-container {
            display: none;
            margin-top: 30px;
            text-align: center;
        }

        .image-preview {
            max-width: 100%;
            border: 1px solid #ddd;
            border-radius: 4px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        .download-btn {
            margin-top: 15px;
        }

        /* Canvas container */
        #canvasContainer {
            display: none;
            margin-top: 20px;
            text-align: center;
        }

        canvas {
            max-width: 100%;
            height: auto;
            border: 1px solid #ddd;
            border-radius: 4px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
    </style>
</head>
<body>
    <div class="container" style="visibility: hidden;">
        <header>
            <h1 class="header-title" style="font-size: 2.5em; margin-bottom: 10px;"><a href="index.html" class="header-link">Image</a></h1>
            <p>Create professional images for your social media marketing</p>
        </header>
        <div class="content-container">
            <!-- Main Form -->
            <div class="form-container" id="mainForm">
                <div class="form-group">
                    <label for="category">Category</label>
                    <div class="social-media-buttons">
                        <button type="button" class="social-btn instagram-btn selected" data-value="Instagram">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 256 256" width="24" height="24">
                                <defs>
                                    <linearGradient id="instagramGradient" x1="0%" y1="100%" x2="100%" y2="0%">
                                        <stop offset="0%" style="stop-color:#833AB4"/>
                                        <stop offset="50%" style="stop-color:#C13584"/>
                                        <stop offset="100%" style="stop-color:#F77737"/>
                                    </linearGradient>
                                </defs>
                                <circle cx="128" cy="128" r="120" fill="url(#instagramGradient)"/>
                                <g transform="translate(60, 60) scale(0.53)">
                                    <path fill="#FFFFFF" d="M128,23.064c34.177,0,38.225,0.13,51.722,0.745c12.48,0.57,19.258,2.655,23.769,4.408c5.974,2.322,10.238,5.096,14.717,9.575c4.48,4.479,7.253,8.743,9.575,14.717c1.753,4.511,3.838,11.289,4.408,23.768c0.615,13.498,0.745,17.546,0.745,51.723c0,34.178-0.13,38.226-0.745,51.723c-0.57,12.48-2.655,19.257-4.408,23.768c-2.322,5.974-5.096,10.239-9.575,14.718c-4.479,4.479-8.743,7.253-14.717,9.574c-4.511,1.753-11.289,3.839-23.769,4.408c-13.495,0.616-17.543,0.746-51.722,0.746c-34.18,0-38.228-0.13-51.723-0.746c-12.48-0.57-19.257-2.655-23.768-4.408c-5.974-2.321-10.239-5.095-14.718-9.574c-4.479-4.48-7.253-8.744-9.574-14.718c-1.753-4.51-3.839-11.288-4.408-23.768c-0.616-13.497-0.746-17.545-0.746-51.723c0-34.177,0.13-38.225,0.746-51.722c0.57-12.48,2.655-19.258,4.408-23.769c2.321-5.974,5.095-10.238,9.574-14.717c4.48-4.48,8.744-7.253,14.718-9.575c4.51-1.753,11.288-3.838,23.768-4.408c13.497-0.615,17.545-0.745,51.723-0.745 M128,0C93.237,0,88.878,0.147,75.226,0.77c-13.625,0.622-22.93,2.786-31.071,5.95c-8.418,3.271-15.556,7.648-22.672,14.764C14.367,28.6,9.991,35.738,6.72,44.155C3.555,52.297,1.392,61.602,0.77,75.226C0.147,88.878,0,93.237,0,128c0,34.763,0.147,39.122,0.77,52.774c0.622,13.625,2.785,22.93,5.95,31.071c3.27,8.417,7.647,15.556,14.763,22.672c7.116,7.116,14.254,11.492,22.672,14.763c8.142,3.165,17.446,5.328,31.07,5.95c13.653,0.623,18.012,0.77,52.775,0.77s39.122-0.147,52.774-0.77c13.624-0.622,22.929-2.785,31.07-5.95c8.418-3.27,15.556-7.647,22.672-14.763c7.116-7.116,11.493-14.254,14.764-22.672c3.164-8.142,5.328-17.446,5.95-31.07c0.623-13.653,0.77-18.012,0.77-52.775s-0.147-39.122-0.77-52.774c-0.622-13.624-2.786-22.929-5.95-31.07c-3.271-8.418-7.648-15.556-14.764-22.672C227.4,14.368,220.262,9.99,211.845,6.72c-8.142-3.164-17.447-5.328-31.071-5.95C167.122,0.147,162.763,0,128,0z"/>
                                    <path fill="#FFFFFF" d="M128,62.27C91.698,62.27,62.27,91.7,62.27,128c0,36.302,29.428,65.73,65.73,65.73c36.301,0,65.73-29.428,65.73-65.73C193.73,91.699,164.301,62.27,128,62.27z M128,170.667c-23.564,0-42.667-19.103-42.667-42.667S104.436,85.333,128,85.333s42.667,19.103,42.667,42.667S151.564,170.667,128,170.667z"/>
                                    <path fill="#FFFFFF" d="M211.686,59.673c0,8.484-6.876,15.36-15.36,15.36c-8.483,0-15.36-6.876-15.36-15.36c0-8.483,6.877-15.36,15.36-15.36C204.81,44.313,211.686,51.19,211.686,59.673z"/>
                                </g>
                            </svg>
                        </button>
                        <button type="button" class="social-btn facebook-btn" data-value="Facebook">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 256 256" width="24" height="24">
                                <defs>
                                    <linearGradient id="facebookGradient" x1="0%" y1="100%" x2="100%" y2="0%">
                                        <stop offset="0%" style="stop-color:#3b5998"/>
                                        <stop offset="100%" style="stop-color:#0b93ff"/>
                                    </linearGradient>
                                </defs>
                                <circle cx="128" cy="128" r="120" fill="url(#facebookGradient)"/>
                                <path fill="#FFFFFF" d="M137.85,208.35v-72.53h24.35l3.65-28.28h-28v-18.03c0-8.18,2.27-13.76,14.01-13.76l14.97-0.01V51.37c-2.59-0.34-11.47-1.11-21.82-1.11c-21.58,0-36.36,13.17-36.36,37.36v20.85H85.21v28.28h23.44v72.53H137.85z"/>
                            </svg>
                        </button>
                        <button type="button" class="social-btn youtube-btn" data-value="YouTube">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 256 256" width="24" height="24">
                                <defs>
                                    <linearGradient id="youtubeGradient" x1="0%" y1="100%" x2="100%" y2="0%">
                                        <stop offset="0%" style="stop-color:#94002d"/>
                                        <stop offset="100%" style="stop-color:#eb3018"/>
                                    </linearGradient>
                                </defs>
                                <circle cx="128" cy="128" r="120" fill="url(#youtubeGradient)"/>
                                <path fill="#FFFFFF" d="M187.5,88.4c-1.9-7.2-7.5-12.8-14.6-14.8C159.4,70,128,70,128,70s-31.4,0-44.9,3.6c-7.1,2-12.7,7.6-14.6,14.8C65,102,65,128,65,128s0,26,3.5,39.6c1.9,7.2,7.5,12.8,14.6,14.8c13.5,3.6,44.9,3.6,44.9,3.6s31.4,0,44.9-3.6c7.1-2,12.7-7.6,14.6-14.8c3.5-13.6,3.5-39.6,3.5-39.6S191,102,187.5,88.4z M112,152V104l36,24L112,152z"/>
                            </svg>
                        </button>
                    </div>
                    <input type="hidden" id="category" value="Instagram">
                </div>

                <style>
                    /* Social media buttons styling */
                    .social-media-buttons {
                        display: flex;
                        gap: 10px;
                        margin-bottom: 15px;
                    }

                    .social-btn {
                        width: 40px;
                        height: 40px;
                        border-radius: 50%;
                        border: 2px solid #ddd;
                        background: white;
                        padding: 5px;
                        cursor: pointer;
                        transition: all 0.2s ease;
                        display: flex;
                        align-items: center;
                        justify-content: center;
                    }

                    .social-btn:hover {
                        transform: scale(1.05);
                        border-color: #ccc;
                    }

                    .social-btn.selected {
                        border-color: #007bff;
                        box-shadow: 0 0 0 2px rgba(0,123,255,0.25);
                    }

                    .social-btn svg {
                        width: 100%;
                        height: 100%;
                    }
                </style>

                <div class="form-group">
                    <label for="serviceName">Service Name</label>
                    <input type="text" id="serviceName" class="form-control" placeholder="Enter service name">
                </div>

                <div class="form-group">
                    <label for="price">Price</label>
                    <input type="text" id="price" class="form-control" placeholder="Enter price" min="0">
                </div>

                <div class="form-group">
                    <label for="quantity">Quantity</label>
                    <input type="text" id="quantity" class="form-control" placeholder="Enter quantity">
                </div>

                <button id="submitForm" class="btn btn-primary btn-block">Continue</button>
            </div>

            <!-- Format Selection -->
            <div class="format-selection" id="formatSelection">
                <h3>Select Image Format</h3>
                <div class="format-options">
                    <div class="format-option" data-format="square">
                        <div style="width: 100%; max-width: 100px; height: 100px; background-color: #eee; margin: 0 auto;"></div>
                        <p>Square (1:1)</p>
                    </div>
                    <div class="format-option" data-format="landscape">
                        <div style="width: 100%; max-width: 160px; height: 90px; background-color: #eee; margin: 0 auto;"></div>
                        <p>Landscape (16:9)</p>
                    </div>
                    <div class="format-option" data-format="portrait">
                        <div style="width: 100%; max-width: 80px; height: 100px; background-color: #eee; margin: 0 auto;"></div>
                        <p>Portrait (4:5)</p>
                    </div>
                </div>
            </div>

            <!-- Canvas for image generation -->
            <div id="canvasContainer">
                <canvas id="imageCanvas"></canvas>
                <div class="download-btn" style="display: flex; gap: 10px; justify-content: center;">
                    <button id="downloadBtn" class="btn btn-primary">Download Image</button>
                    <button id="startOverBtn" class="btn btn-secondary">Start Over</button>
                </div>
            </div>
        </div>
        <footer>
            <p>Powered by AI</p>
        </footer>
    </div>
    <script src="image.js?v=1.0.1"></script>
    <!-- Add page transitions script -->
    <script src="page-transitions.js?v=1.0.1"></script>
    <!-- PWA Service Worker Registration with Update on Reload -->
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                // Add a timestamp parameter to force service worker update
                navigator.serviceWorker.register('./sw.js?v=' + new Date().getTime())
                    .then(registration => {
                        console.log('Service Worker registered with scope:', registration.scope);

                        // Check for service worker updates on each page load
                        registration.update();

                        // Handle service worker updates
                        registration.addEventListener('updatefound', () => {
                            const newWorker = registration.installing;
                            console.log('Service Worker update found!');

                            newWorker.addEventListener('statechange', () => {
                                if (newWorker.state === 'installed' && navigator.serviceWorker.controller) {
                                    console.log('New content is available; please refresh.');
                                    // You could show a notification to the user here
                                }
                            });
                        });
                    })
                    .catch(error => {
                        console.error('Service Worker registration failed:', error);
                    });

                // Handle service worker controlled pages
                if (navigator.serviceWorker.controller) {
                    console.log('This page is currently controlled by:', navigator.serviceWorker.controller);
                }
            });
        }
    </script>
</body>
</html>
